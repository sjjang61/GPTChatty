<html>
<head> 
  <meta charset="utf-8">
  <link href="../dist/bootstrap/css/bootstrap.css" rel="stylesheet">
  <script src="../dist/bootstrap/js/bootstrap.min.js"></script> 
  <script src="../dist/etc/additional_css.css"></script> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script> 
  <script src="./include.js" defer></script>  
  <script src="../dist/etc/additional_js.js" defer></script>
  <script src="../dist/main/micro-template.js" defer></script>
  <script src="../dist/main/js-utils.js" defer></script>
  <script src="../dist/main/chatty.js" defer></script>
  <script src="https://www.chatties.shop/js/main.js" defer></script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Bootstrap, a sleek, intuitive, and powerful mobile first front-end framework for faster and easier web development.">
  <meta name="keywords" content="HTML, CSS, JS, JavaScript, framework, bootstrap, front-end, frontend, web development">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">  

  <style type="text/css">
    body {
    margin: 0; 
    display: flex;            /*내부 요소들이 차례로 배치 */
    justify-content: center;  /*내부 요소의 좌우 정렬 상태를 가운데로 설정*/
    align-items: center;      /*요소는 세로 중앙 배치*/
    height: 100vh;            /*웹 크기 변화에 따라 변경되는 반응형 수치*/
  }


#recordButtonContainer {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: row;
    padding: 20px;
    width: 100%;
}

.recordActive {
    font-size: 30px;
    background-color: red;
    padding-bottom: 10px;
    cursor: pointer;
    width: 400px;
    height: 40px;
    border: 1px solid darkgray;
    border-radius: 15px;
    color: white;
}

.recordInactive {
    font-size: 30px;
    background-color: white;
    padding-bottom: 10px;
    cursor: pointer;
    width: 400px;
    height: 40px;
    border: 1px solid darkgray;
    border-radius: 15px;
    color: red;
}

.recordInactive:hover {
    background-color: rgb(240, 240, 240);
}

.recordInactive:active {
    background-color: white;
}

.loading span {
    display: inline-block; /* span 내부요소들을 한줄로 세우기 */
    width: 10px;
    height: 10px;
    background-color: gray;
    border-radius: 50%;    /* span을 동그랗게 */
    animation: loading 1s 0s linear infinite;
    /* 이벤트명  반복시간  딜레이시간  이벤트처리부드럽게  이벤트무한반복*/
  }
  
  .loading span:nth-child(1) {  /*loading의 자식 중 첫번째 span*/
    /*nth-child : 형제 사이에서의 순서*/
    animation-delay: 0s;
    background-color: red;
  }
  
  .loading span:nth-child(2) {
    animation-delay: 0.2s;
    background-color: orange;
  }
  
  .loading span:nth-child(3) {
    animation-delay: 0.4s;
    background-color: yellowgreen;
  }
@keyframes loading {        /*loading이라는 keyframe 애니메이션*/
    0%,                      /* 0, 50, 100은 구간*/
    100% {
      opacity: 0;            /* 안보였다가 */
      transform: scale(0.5); /*transform의 scale로 요소를 확대 또는 축소할 수 있음*/   
    }
    50% {
      opacity: 1;             /* 보였다가 */
      transform: scale(1.2); /* 1.2배 */
    }
  }

 </style>

</head> 
<body>
 
<tag data-include="./common_sub_menu_class.html"></tag>
<tag data-include="./common_menu.html"></tag>
<br><br><br>

    <div class="container-fluid" id="chatview" style="height: 500px; position: relative; top: -140px; padding-top: 20px; overflow: auto;">
    <!-- JS code
        (( 수정 전))
        const li = document.createElement('li');
        li.classList.add(nickname.value === this.name ? 'sent' : 'received');
        const dom = `<span class="profile">
            <span class="user">${this.name}</span>
            <img class="image" src="https://placeimg.com/50/50/any" alt="any" />
          </span>
          <span class="message">${this.msg}</span>
          <span class="time">${this.time}</span>`;

        ((수정 후))
        const li = document.createElement('li');
        li.classList.add(nickname.value === this.name ? 'sent' : 'received');
        const dom = `
        <div class='row container-fluid'>
            <div class='col-3 text-center'><img width='60px' src='../img/me.png'><br><b>${this.name}</b></div>
            <div class="col-9">
                ${this.msg}
                <br><br>
                <p class='h6'>${this.time}</p>
            </div>
        </div>`;
    -->

        <ul class='list-group'  id="conv_list">
            <!-- conv start -->
            <li>
                <div class='row container-fluid'>
                    <div class='col-3 text-center'><img width='60px' src='../img/me.png'><br><b>agent</b></div>
                    <div class="col-9">
                        Let's start to conversation.
                        Teacher will be answer.
                        <br><br>
                        <!--<p class='h6'>오후 3:56</p>-->
                    </div>
                </div>
                <br>
            </li>
            <!--
            <li>
                <div class='row container-fluid'>
                    <div class='col-3 text-center'><img width='60px' src='../img/you1.png'><br><b>Nick</b></div>
                    <div class="col-9">
                        Hey, did you hear about NewJeans breaking a new record with their album sales?
                    <br><br>
                    <p class='h6'>오후 3:56</p>
                    </div>
                </div>
                <br><br>
            </li>
            -->
            <!-- conv end -->
        </ul>
        <br>
    </div>

    <div class='row fixed-bottom bg-light mb-6 p-3 order-first'>
        <div class=''>
            <div id="recordButtonContainer">
                <button id = "record" class="recordInactive" onclick = "onRecordPress()" style="font-size:25px; width: 100%">◉</button>
            </div>
            <div class="loading">
                <h6>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>
                </svg>
                <b>&nbsp;I'm listening, Ask a question&nbsp;</b>
                <span></span>
                <span></span>
                <span></span>
                </h6>
            </div>
            <p class="ms-4">If you can't think of a question, read along with the example sentences</p>
        </div>

        <div class='col-9'>
            <div class="form-floating">
                <input type="text" class="form-control" id="textMessage" placeholder="name@example.com">
                <label for="textMessage">&nbsp;Example Sentence</label>
            </div>
        </div>
        <div class='col-2'>
            <button type="button" id="sendBtn" class="btn btn-primary" style='height:100%'>Send</button>
        </div>
    </div>

    <audio id="myAudio" src="">
        오디오 지원되지 않는 브라우저
    </audio>

    <!-- aws transcribe -->
    <div id = "mainContainer">
        <select id="inputLanguageList" style="display:none">
            <option value="en-US" selected>English (US)</option>
        </select>

        <!--
        <div id="recordButtonContainer">
            <button id = "record" class="recordInactive" onclick = "onRecordPress()" style="width:60px; height:60px;">◉</button>
        </div>
        -->

        <div id = "outputSection">
            <div id = "transcribedText" style="display:none"></div>
            <div id = "translatedText" style="display:none"></div>
        </div>
    </div>

    <br><br><br>
</body>

<script type="text/html" id="conv_tmpl">
    <li>
        <div class="row container-fluid">
            <div class="col-3 text-center"><img width="60px" src="../img/you1.png"><br><b><%= obj.speaker %></b></div>
            <div class="col-9">
                <%= obj.text %>
                <br><br>
            </div>
        </div>
        <br>
    </li>
</script>
</html>
